---
output: ioslides_presentation
---

```{r include=F}
library(png)
library(grid)
library(knitr)

opts_chunk$set(echo=FALSE,
               warning=FALSE,
               message=FALSE,
               fig.width= 5,
               fig.height= 5,
               fig.align='center')

```






## Reproducible Research

```{r fig.height=4}
img <- readPNG("Images/Irreproducible.png")
 grid.raster(img)
```


<center>
Lewis Spurgin

EGI meeting, February 2016
</center>





## A reproducibility crisis?

```{r}
img <- readPNG("Images/Reinhart.png")
 grid.raster(img)
```





## A reproducibility crisis?

<div class="columns-2">

```{r fig.width=4}
img <- readPNG("Images/Reinhart.png")
 grid.raster(img)
```

<br>
"In their Excel spreadsheet, Reinhart and Rogoff had not selected the entire row when averaging growth figures: they omitted data from Australia, Austria, Belgium, Canada and Denmark... "

</div>






## A reproducibility crisis?

<div class="columns-2">

```{r fig.width=4}
img <- readPNG("Images/Reinhart.png")
 grid.raster(img)
```

<br>
"For an economist, the five most terrifying words in the English language are: I can't replicate your results. But for economists Carmen Reinhart and Ken Rogoff of Harvard, there are seven even more terrifying ones: I think you made an Excel error."

</div>







## A reproducibility crisis?

```{r fig.width=6,fig.height=4}
img <- readPNG("Images/News.png")
 grid.raster(img)
```






## How reproducible research could help you

* New raw data becomes available

* Returning to a project after a period of time

* Project is handed over to someone else (new postdoc, new PhD student)

* You seriously screw things up

* Dealing with pre-/post-publication peer review

<br>
<br>

<p align="right">
<font size = '3'>
Nicked from https://susanejohnston.files.wordpress.com/2016/02/reproducible-research.pdf
</font>
</p>



## Reproducibility and replicability
<br>
<br>

* **Replicability** is the ability to replicate results after completely performing an experiment again from scratch.

* **Reproducibility** is the ability to reproduce the same results from a dataset that has already been generated.









## Requirements for reproducible research

* Data are available

* Methods/analyses are transparent

```{r fig.width=6,fig.height=2}
img <- readPNG("Images/Reproducibility_spectrum.png")
 grid.raster(img)
```
<br>
<br>


<p align="right">
<font size = '3'>
Peng *et al.* (2012) *Science*
</font>
</p>





## Data availability

* Now a requirement for many journals and funding agencies
* Gets you more citations
* Long-term storage of data

<br>

```{r fig.width=6,fig.height=2}
img <- readPNG("Images/Dryad.png")
 grid.raster(img)
```





## Data availability - not a panacea

* Usually tidied data uploaded
* What has been done to the raw data?
* Any possibility of errors?
* *How have the data been analysed?*

<br>

```{r fig.width=6,fig.height=2}
img <- readPNG("Images/Dryad.png")
 grid.raster(img)
```





## Transparency in methods/analysis

* How were the data formatted?
  
* How were the data cleaned?
  
* What exploratory analyses were done?

* How did you create your final analyses/figures?

```{r fig.width=6,fig.height=2}
img <- readPNG("Images/Excel.png")
 grid.raster(img)
```







##Tools for reproducible research - R

- All analyses and figures are documented in a script
- Free
- Highly flexible
- Can also be used for data manipulation


```{r fig.width=2,fig.height=2}
img <- readPNG("Images/R_logo.png")
 grid.raster(img)
```

<br>

<p align="right">
<font size = '3'>
https://www.r-project.org
</font>
</p>



##Tools for reproducible research - R

```{r echo=T, fig.width=3,fig.height=3}

#Generate some data
x <- sample(10)
y <- sample(10)

#Make a plot
plot(y~x)
```







## R can be irreproducible

<br>
<br>

```{r echo=T, eval=F}

setwd('My Documents/Old papers/Great tit paper 21/FINAL FINAL VERSION 11')
mydata <- read.table('final data.txt')

plot(mydata)

```









##Tools for reproducible research - R markdown / knitr

* R Markdown - language for authoring reports/papers/presentations that can include R code http://rmarkdown.rstudio.com

* knitr - R package that processes R markdown scripts and turns them into reports/slides http://yihui.name/knitr/ 

* Integrated into Rstudio https://www.rstudio.com




##Tools for reproducible research - R markdown / knitr

This code....
```{r echo=T,eval=F}
We studied `r nrow(mydata)` great tits
```
<br>

Gives you this...
```{r echo=T,eval=F}
We studied 50 great tits
```




##Tools for reproducible research - R markdown / knitr

This is the code for this slide:

```{r fig.width=5,fig.height=3}
img <- readPNG("Images/Markdown_slide.png")
 grid.raster(img)
```








##Tools for reproducible research - R markdown / knitr

```{r fig.width=7,fig.height=4}
img <- readPNG("Images/Markdown_ms.png")
 grid.raster(img)
```
















